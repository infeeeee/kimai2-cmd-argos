#!/bin/bash
# <bitbar.title>Kimai2-cmd</bitbar.title>
# <bitbar.version>v0.1</bitbar.version>
# <bitbar.author>infeeeee</bitbar.author>
# <bitbar.author.github>infeeeee</bitbar.author.github>
# <bitbar.desc>Client for kimai2 the open source self hosted timetracker</bitbar.desc>
# <bitbar.image>http://www.hosted-somewhere/pluginimage</bitbar.image>
# <bitbar.dependencies>kimai2-cmd</bitbar.dependencies>
# <bitbar.abouturl>https://github.com/infeeeee/kimai2-cmd-argos/</bitbar.abouturl>

# --------------------------------- Settings --------------------------------- #

# path to kimai:
kimaipath=kimai

# Images: Uncomment what you want to use
# Full color: (on mac change imagetype to 'image')
#kimailogo='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'
# Black with alpha:
#kimailogo='iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAAGWB6gOAAAACXBIWXMAABYlAAAWJQFJUiTwAAAFJ0lEQVRYCbWX3WseRRTG3w8FqQ2ClPpBpQgiSFoVpKK2ahCCYP24yWUoSEEoopWW3rcq+A9415ra25RUrwUpFEFbCyJIRQolEC1CTBSlVENIfH6759nMTnbNRuuB5z3fZ2Znz8zs2+uJVlZWYF/yU1AYrI5JWEC5xI9otWT6zSKxLw/Cuxh8Wfy2kHv3SJi2slbHFni/35+3/ogF8fGBRvtewsUw7iqGjym41sFwkmlbMWrY17FxWb7Fei5zkc3c1ygbas3R63nYw5Uxgk/I8J2wv3IghPMjiefDMRqcYbeE3MM4YiXlg8HgpvU04zUbg1NpDvmHMLC8P0smKaXVwXAw4O0UpCCL64Yn86nwvuuo4LeLn/LTXZXyUjjuDg4rFzWWgG7BcD8e0SFhNXyFIf/ZJcMSQYFr4pc1398T2zQFakUSw1QE8mATgulNCX4u2+AsH4OVfR1V/5LhvPBviGJPk/ieUO8wrCK93XkxAh9GbyHWjJgeu+ILYVI4IFSkQn7ZBBqvR8BOcXKgotCrFgpT/ed6+JxQ95Yaa1it/CdSGh+vKTOxvSyZ2fTT/b0Vo17zb0mgxbzpKcDA+Y52fLX/npfFj8WIJJlPuWXija8lp5KDZGNUjjZ2O2fpcaHaUJI3pLOKYHQek26+LNDdhU2cnhtNBpQqSgx3SnVw2jfIaVtciLiTtUcLZRjOWXHIWwL7o8IbGIOeFWcbMejJsFWLuyjDjcrY621L5FzcGYa7xClWnfv7whD+TTF2xJ/O+EnCN6E8aWMH7t5iVtuJR2h7FHyfE/QPRI8dx09wG+EzDrYE0Rpf4XOhScn5zFzEnNFNtAQ5NCtNWxVCzskF4GdyJ7qOGvYmO6AolPYJNhMFrltp4cTsx3daYMo0Wk47ckOi81gPChQqiMMbxfdRae32ywRmitDYIkekYDSlRdOLDpltA3kjl1qyaT+VhWITpaf6deNVhuFwyKnAU7DRS3KhmNlRWQngguQmTYnbgiOFwRaEfuRIbKBwnpaLBIqaI7OdniPGkN6NkoR9yjglzAkU7QJiOWr2uk7O5atTHmBdUXzkvCOwHOngfA++LewQ2ggfucSmub9IJ7d9ZTwBc8XyQs8JRaH4tlvXAPKbOBNGhScE5Daa0FXCd6IneFbylnXBnghcxFM5YRZDQrQ0Aw4TG+LjAoW5DZBz4kDPJzonm8d5q5YQE2HTVqsiOd1ntfhbqLANPSlWixaprrQpiTiXBY4XMClU15XkW0lc3NQGjMnY1T37ihTeF8ZDQifSIUKzzwr/dTVpcsZmDkWtGQxxDUjsRmrQ/AuVw+tDgX7aFMXnIZOaJpHPYhQ+BKCxBPxTaaSGCVEjBadoU5OPyP6CMCb4xuJyJbe4YL8OpfozJn1D2mhCcS8c27BQGXBNjAkVnw7vh0JzbRM6UcufiotK5jzaDHEnubFPkHivwNcBM6SgiWXdayXnmtCCVom++UDIz6Y8PNXZWSnxahn7R2F7cYRL4F3y8Y3jM+H/Jjc+n5KMydjPFIP6pJayW/hVWI3376QiLn4eSpWOclOdEa2uvz0WVYerpyRPKE5slv6MwKx5r1eFOwToQMkafzl1QRO9KON4ONhhNLB7Zkpy/XWnE7KsIBI/FjwxCvAqOWGbiMu37QJmVcmlRjqRrbEIMm+OHlM499ySkE5wScs+L9sV4ULgSpzgxKYTQJ8RdvuhzWWrUb+mNSj5U2h33acw/jTtEdgxDwisKPSHwE3OYXspwInemf4GnqxeegFEzTIAAAAASUVORK5CYII='
# White with alpha:
kimailogo='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'

# Image type
# On mac use 'image' for the colored icon, 'templateImage' for black icon
#imagetype=image
imagetype=templateImage

# -------------------------- Beginning of the script ------------------------- #

echo "$(${kimaipath} -b list-active) $imagetype=$kimailogo imageHeight=16"
echo "---"
echo "Active measurements: (Click to stop)"
$kimaipath -a list-active
echo "---"
echo "Recent measurements:"
$kimaipath -a list-recent
echo "---"
echo "Open Kimai in browser | href='$($kimaipath url)'"
echo "Reload | refresh=true"

# ----------------------------- End of the script ---------------------------- #